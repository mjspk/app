<div class="container">
    <div class="row">
        <div class="col-2">
            <div class="list-group">
                <button class="list-group-item bg-gb" *ngFor="let category of categories"
                    (click)="selectCategory(category)" [class.active-accent]="category === selectedCategory">
                    {{ category.name }}
                </button>
            </div>
        </div>
        <div class="col-8">
            <div class="row">
                <div class="search-container">
                    <div class="search-area">
                        <div class="loading-img-container ">
                            <img *ngIf="isLoading" src="https://acegif.com/wp-content/uploads/loading-37.gif"
                                alt="Loading..." class="loading-img">
                        </div>
                        <input type="search" placeholder="Search books" id="search-bar" [(ngModel)]="searchTerm"
                            (keyup.enter)="search()">
                        <button class="search-button" id="search-btn" (click)="search()" [disabled]="isLoading">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                    <button class="prev-button" (click)="previousPage()" [disabled]="pageNumber === 1">
                        <i class="fa fa-arrow-left"></i>
                    </button>
                    <button class="next-button" (click)="nextPage()" [disabled]="books.length < 10">
                        <i class="fa fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="center-center col-md-3" *ngIf="books.length === 0 && !isLoading">
                    <div class="alert alert-info text-center">
                        No books found.
                    </div>
                </div>
                <div class="card" *ngFor="let book of books" style="padding: 0px;margin: 4px; width: 32%;">
                    <img class="card-img-top" [src]="book.cover" alt="{{ book.title }} cover image"
                        style="height: 75%;width: 100%;object-fit: cover;">
                    <div class="card-body text-center">
                        <h5 class="card-title">{{ book.title }}</h5>
                        <p class="card-text">{{ book.download_count }} downloads</p>
                        <div class="row">
                            <div class="col">
                                <div class="dropdown" style="display: inline-block;">
                                    <button class="btn bg-accent dropdown-toggle" type="button" id="dropdownMenuButton"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fa fa-download"></i>
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                        <li><a class="dropdown-item" (click)="downloadPdf(book)"><i
                                                    class="fa fa-file-pdf-o"></i>
                                                PDF</a></li>
                                        <li><a class="dropdown-item" (click)="downloadTxt(book)"><i
                                                    class="fa fa-file-text-o"></i>
                                                TXT</a></li>
                                        <li><a class="dropdown-item" (click)="downloadMP3(book)"><i
                                                    class="fa fa-file-audio-o"></i>
                                                MP3</a></li>

                                    </ul>
                                </div>
                                <button class="btn bg-accent m-2"><i class="fa fa-book" (click)="read(book)"
                                        style="width: 20px;"></i></button>
                                <button class="btn bg-accent m-2"><i class="fa fa-play" (click)="play(book)"
                                        style="width: 20px;"></i></button>
                                <button class="btn bg-accent m-2"><i class="fa fa-info" (click)="info(book)"
                                        style="width: 20px;"></i></button>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 text-center">
                        <button class="btn bg-accent" (click)="previousPage()" [disabled]="pageNumber === 1">
                            <i class="fa fa-arrow-left"></i>
                        </button>
                        <button class="btn bg-accent" (click)="nextPage()" [disabled]="books.length < 10">
                            <i class="fa fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
       
    </div>